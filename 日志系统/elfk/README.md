#### 前言

经过上周的技术预研，在本周一通过开会研究，根据公司的现有业务流量和技术栈，决定选择的日志系统方案为：elasticsearch(es)+logstash(lo)+filebeat(fi)+kibana(ki)组合。es选择使用aliyun提供的es，lo&fi选择自己部署，ki是阿里云送的。因为申请ecs需要一定的时间，暂时选择部署在测试&生产环境(吐槽一下，我司测试和生产公用一套k8s并且托管与aliyun......)。用时一天(前期有部署的差不多过)完成在kubernetes上部署完成elfk(先部署起来再说，优化什么的后期根据需要再搞)。

#### 组件简介

es 是一个实时的、分布式的可扩展的搜索引擎，允许进行全文、结构化搜索，它通常用于索引和搜索大量日志数据，也可用于搜索许多不同类型的文。

lo 主要的有点就是它的灵活性，主要因为它有很多插件，详细的文档以及直白的配置格式让它可以在多种场景下应用。我们基本上可以在网上找到很多资源，几乎可以处理任何问题。

作为 Beats 家族的一员，fi 是一个轻量级的日志传输工具，它的存在正弥补了 lo 的缺点fi作为一个轻量级的日志传输工具可以将日志推送到中心 lo。

ki是一个分析和可视化平台，它可以浏览、可视化存储在es集群上排名靠前的日志数据，并构建仪表盘。ki结合es操作简单集成了绝大多数es的API，是专业的日志展示应用。

#### 数据采集流程图


日志流向：logs_data---> fi ---> lo ---> es---> ki。

logs_data通过fi收集日志，输出到lo，通过lo做一些过滤和修改之后传送到es数据库，ki读取es数据库做分析。
